<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PerformanceAnalytics Charts and Tables Overview • PerformanceAnalytics</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script><script src="../pkgdown.js"></script><!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">PerformanceAnalytics</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/pa-charts.html">PerformanceAnalytics Charts and Tables Overview</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/braverock/PerformanceAnalytics">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    <div class="page-header toc-ignore">
      <h1>PerformanceAnalytics Charts and Tables Overview</h1>
                        <h4 class="author">Peter Carl &amp; Brian G. Peterson</h4>
            
            <h4 class="date">2018-04-05</h4>
          </div>

    
    
<div class="contents">
<style>
img {width: 100%;}
</style>
<div id="abstract" class="section level1">
<h1 class="hasAnchor">
<a href="#abstract" class="anchor"></a>Abstract</h1>
<blockquote>
<p>This vignette gives a brief overview of (some of) the graphics and display wrapper functionality contained in  including most of the charts and tables . For a more complete overview of the package’s functionality and extensibility see the manual pages. We develop the examples using data for six (hypothetical) managers, a peer index, and an asset class index.</p>
</blockquote>
</div>
<div id="introduction" class="section level1">
<h1 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h1>
<p><code>PerformanceAnalytics</code> is a library of functions designed for evaluating the performance and risk characteristics of financial assets or funds. In particular, we have focused on functions that have appeared in the academic literature over the past several years, but had no functional equivalent in R.</p>
<p>Our goal for <code>PerformanceAnalytics</code> is to make it simple for someone to ask and answer questions about performance and risk as part of a broader investment decision-making process. There is no magic bullet here – there won’t be one <strong>right</strong> answer delivered in these metrics and charts. Investments must be made in context of investment objectives. But what this library aspires to do is <strong>help</strong> the decision-maker accrete evidence organized to answer a specific question that is pertinent to the decision at hand. Our hope is that using such tools to uncover information and ask better questions will, in turn, create a more informed investor and help them ask better quality decisions.</p>
<p>This vignette provides a demonstration of some of the capabilities of <code>PerformanceAnalytics</code>. We focus on the graphs and tables, but comment on some other metrics along the way. These examples are not intended to be complete, but they should provide an indication of the kinds of analysis that can be done. Other examples are available in the help pages of the functions described in the main page of <code>PerformanceAnalytics</code>.</p>
</div>
<div id="set-up-performanceanalytics" class="section level1">
<h1 class="hasAnchor">
<a href="#set-up-performanceanalytics" class="anchor"></a>Set up PerformanceAnalytics</h1>
<p>These examples assume the reader has basic knowledge of <code>R</code> and understands how to install <code>R</code>, read and manipulate data, and create basic calculations. For further assistance, please see <a href="http://cran.r-project.org/doc/manuals/R-intro.pdf" class="uri">http://cran.r-project.org/doc/manuals/R-intro.pdf</a> and other available materials at <a href="http://cran.r-project.org" class="uri">http://cran.r-project.org</a>. This section will begin with installation, discuss the example data set, and provide an overview of charts attributes that will be used in the examples that follow.</p>
<div id="install-performanceanalytics" class="section level2">
<h2 class="hasAnchor">
<a href="#install-performanceanalytics" class="anchor"></a>Install PerformanceAnalytics</h2>
<p>As of version 0.9.4, <code>PerformanceAnalytics</code> is available via CRAN, but you will need version 0.9.5 or later to replicate the examples that follow. R users with connectivity can simply type: <code>install.packages("PerformanceAnalytics")</code>. Or, if you already have an earlier version installed, see <code>update.packages</code>. A number of packages are required, including <code>Hmisc</code>, <code>zoo</code>, and the various Rmetrics packages such as <code>fBasics</code>, <code>fCalendar</code>, and <code>fExtremes</code>. After installing <code>PerformanceAnalytics</code>, load it into your active R session using <code>library("PerformanceAnalytics")</code>.</p>
</div>
<div id="load-and-review-data" class="section level2">
<h2 class="hasAnchor">
<a href="#load-and-review-data" class="anchor"></a>Load and review data</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">data</span>(managers)
<span class="kw">head</span>(managers)</code></pre></div>
<table class="table">
<thead><tr class="header">
<th></th>
<th align="right">HAM1</th>
<th align="right">HAM2</th>
<th align="right">HAM3</th>
<th align="right">HAM4</th>
<th align="right">HAM5</th>
<th align="right">HAM6</th>
<th align="right">EDHEC.LS.EQ</th>
<th align="right">SP500.TR</th>
<th align="right">US.10Y.TR</th>
<th align="right">US.3m.TR</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>1996-01-31</td>
<td align="right">0.0074</td>
<td align="right">NA</td>
<td align="right">0.0349</td>
<td align="right">0.0222</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">0.0340</td>
<td align="right">0.00380</td>
<td align="right">0.00456</td>
</tr>
<tr class="even">
<td>1996-02-29</td>
<td align="right">0.0193</td>
<td align="right">NA</td>
<td align="right">0.0351</td>
<td align="right">0.0195</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">0.0093</td>
<td align="right">-0.03532</td>
<td align="right">0.00398</td>
</tr>
<tr class="odd">
<td>1996-03-31</td>
<td align="right">0.0155</td>
<td align="right">NA</td>
<td align="right">0.0258</td>
<td align="right">-0.0098</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">0.0096</td>
<td align="right">-0.01057</td>
<td align="right">0.00371</td>
</tr>
<tr class="even">
<td>1996-04-30</td>
<td align="right">-0.0091</td>
<td align="right">NA</td>
<td align="right">0.0449</td>
<td align="right">0.0236</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">0.0147</td>
<td align="right">-0.01739</td>
<td align="right">0.00428</td>
</tr>
<tr class="odd">
<td>1996-05-31</td>
<td align="right">0.0076</td>
<td align="right">NA</td>
<td align="right">0.0353</td>
<td align="right">0.0028</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">0.0258</td>
<td align="right">-0.00543</td>
<td align="right">0.00443</td>
</tr>
<tr class="even">
<td>1996-06-30</td>
<td align="right">-0.0039</td>
<td align="right">NA</td>
<td align="right">-0.0303</td>
<td align="right">-0.0019</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">0.0038</td>
<td align="right">0.01507</td>
<td align="right">0.00412</td>
</tr>
</tbody>
</table>
<p>First we load the data used in all of the examples that follow. As you can see, <code>managers</code> is a data frame that contains columns of monthly returns for six hypothetical asset managers (HAM1 through HAM6), the EDHEC Long-Short Equity hedge fund index, the S&amp;P 500 total returns, and total return series for the US Treasury 10-year bond and 3-month bill. Monthly returns for all series end in December 2006 and begin at different periods starting from January 1996. Similar data could be constructed using <code>mymanagers=read.csv("/path/to/file/mymanagers.csv", row.names=1)</code>, where the first column contains dates in the <code>YYYY-MM-DD</code> format.</p>
<p>A quick sidenote: this library is applicable to return (rather than price) data, and has been tested mostly on a monthly scale. Many library functions will work with regular data at different scales (e.g., daily, weekly, etc.) or irregular return data as well. See function <code>CalculateReturns</code> for calculating returns from prices, and be aware that the <code>zoo</code> library’s <code>aggregate</code> function has methods for <code>tseries</code> and <code>zoo</code> timeseries data classes to rationally coerce irregular data into regular data of the correct periodicity.</p>
<p>With the data object in hand, we group together columns of interest make the examples easier to follow. As shown in Figure Assess-and-Organize, we first confirm the dimensions of the object and the overall length of the timeseries.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">dim</span>(managers)</code></pre></div>
<pre><code>## [1] 132  10</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">managers.length =<span class="st"> </span><span class="kw">dim</span>(managers)[<span class="dv">1</span>]
<span class="kw">colnames</span>(managers)</code></pre></div>
<pre><code>##  [1] "HAM1"        "HAM2"        "HAM3"        "HAM4"        "HAM5"       
##  [6] "HAM6"        "EDHEC LS EQ" "SP500 TR"    "US 10Y TR"   "US 3m TR"</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">manager.col =<span class="st"> </span><span class="dv">1</span>
peers.cols =<span class="st"> </span><span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>)
indexes.cols =<span class="st"> </span><span class="kw">c</span>(<span class="dv">7</span>,<span class="dv">8</span>)
Rf.col =<span class="st"> </span><span class="dv">10</span>
<span class="co">#factors.cols = NA</span>
trailing12.rows =<span class="st"> </span>((managers.length <span class="op">-</span><span class="st"> </span><span class="dv">11</span>)<span class="op">:</span>managers.length)
trailing12.rows</code></pre></div>
<pre><code>##  [1] 121 122 123 124 125 126 127 128 129 130 131 132</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">trailing36.rows =<span class="st"> </span>((managers.length <span class="op">-</span><span class="st"> </span><span class="dv">35</span>)<span class="op">:</span>managers.length)
trailing60.rows =<span class="st"> </span>((managers.length <span class="op">-</span><span class="st"> </span><span class="dv">59</span>)<span class="op">:</span>managers.length)
<span class="co">#assume contiguous NAs - this may not be the way to do it na.contiguous()?</span>
frInception.rows =<span class="st"> </span>(<span class="kw">length</span>(managers[,<span class="dv">1</span>]) <span class="op">-</span><span class="st"> </span><span class="kw">length</span>(managers[,<span class="dv">1</span>][<span class="op">!</span><span class="kw">is.na</span>(managers[,<span class="dv">1</span>])]) <span class="op">+</span><span class="st"> </span><span class="dv">1</span>)<span class="op">:</span><span class="kw">length</span>(managers[,<span class="dv">1</span>])</code></pre></div>
<p>Next, we group the columns together. The first column, HAM1, contains the subject of our analysis in the examples below. Columns two through six contain returns of other managers using a similar investing style that might be considered substitutes – a peer group, of sorts. Columns seven and eight contain key indexes. The EDHEC Long/Short Equity index is a peer index, and the S&amp;P 500 Total Return index is an asset-class index. We combine those into a set of indexes for later analysis. Column nine we skip for the time being; column 10 we use as the risk free rate for each month.</p>
<p>Then we do the same thing for the rows of interest. We calculate the row numbers that represent different trailing periods and keep those handy for doing comparative analyses.</p>
</div>
<div id="create-charts-and-tables-for-presentation" class="section level2">
<h2 class="hasAnchor">
<a href="#create-charts-and-tables-for-presentation" class="anchor"></a>Create charts and tables for presentation</h2>
<p>Graphs and charts help to organize information visually. Our goals in creating these functions were to simplify the process of creating well-formatted charts that are frequently used for portfolio analysis and to create print-quality graphics that may be used in documents for broader consumption. R’s graphics capabilities are substantial, but the simplicity of the output of R’s default graphics functions such as <code>plot</code> does not always compare well against graphics delivered with commercial asset or portfolio analysis software from places such as MorningStar or PerTrac.</p>
</div>
<div id="color-palettes" class="section level2">
<h2 class="hasAnchor">
<a href="#color-palettes" class="anchor"></a>Color Palettes</h2>
<p>We have set up some specific color palattes designed to create readable line and bar graphs with specific objectives. We use this approach (rather than generating them on the fly) for two reasons: first, there are fewer dependencies on libraries that don’t need to be called dynamically; and second, to guarantee the color used for the n-th column of data. Figure Examples-of-Color shows some examples of the different palates.</p>
<p>The first category of colorsets are designed to provide focus to the data graphed as the first element, and include <code>redfocus</code>, <code>bluefocus</code>, and <code>greenfocus</code>. These palettes are best used when there is an important data set for the viewer to focus on. The other data provide some context, so they are graphed in diminishing values of gray. These were generated with <code>RColorBrewer</code>, using the 8 level “grays” palette and replacing the darkest gray with the focus color. To coordinate these colorsets with the equal-weighted colors below, replace the highlight color with the first color of the equal weighted palette from below. This will coordinate charts with different purposes.</p>
<p>The second category is sets of equal-weighted colors. These colorsets are useful for when all of the data should be observed and distinguishable on a line graph. The different numbers in the name indicate the number of colors generated (six colors is probably the maximum for a readable linegraph, but we provide as many as twelve). Examples include <code>rainbow12equal</code> through <code>rainbow4equal</code>, in steps of two. These colorsets were generated with <code>rainbow(12, s = 0.6, v = 0.75)</code>. The <code>rich12equal</code> and other corresponding colorsets were generated with with package <code>gplots</code> function <code>rich.colors(12)</code>. Similarly <code>tim12equal</code> and similar colorsets were generated with with package <code>fields</code> function <code>tim.colors(12)</code>, a function said to emulate the Matlab colorset. The <code>dark8equal</code>, <code>dark6equal</code>, <code>set8equal</code>, and <code>set6equal</code> colorsets were created with package <code>RColorBrewer</code>, e.g., <code>brewer.pal(8,"Dark2")</code>. A third category is a set of monochrome colorsets, including <code>greenmono</code> , <code>bluemono</code>, <code>redmono</code>, and <code>gray8mono</code> and <code>gray6mono</code>.</p>
<p>To see what these lists contain, just type the name.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">tim12equal</code></pre></div>
<pre><code>##  [1] "#00008F" "#0000EA" "#0047FF" "#00A2FF" "#00FEFF" "#5AFFA5" "#B5FF4A"
##  [8] "#FFED00" "#FF9200" "#FF3700" "#DB0000" "#800000"</code></pre>
<p>These are just lists of strings that contain the RGB codes of each color. You can easily create your own if you have a particular palate that you like to use. Alternatively, you can use the R default colors. For more information, see this <a href="http://research.stowers-institute.org/efg/R/Color/Chart/index.htm">color chart</a>.</p>
<div class="figure">
<img src="pa-charts_files/figure-html/showPalettes-1.png" alt="Examples of Color Palettes" width="768"><p class="caption">
Examples of Color Palettes
</p>
</div>
</div>
<div id="symbols" class="section level2">
<h2 class="hasAnchor">
<a href="#symbols" class="anchor"></a>Symbols</h2>
<p>Similarly, there are a few sets of grouped symbols for scatter charts . These include <code>opensymbols</code>, <code>closedsymbols</code>, <code>fillsymbol</code>, <code>linesymbols</code>, and <code>allsymbols</code>.</p>
</div>
<div id="legend-locations" class="section level2">
<h2 class="hasAnchor">
<a href="#legend-locations" class="anchor"></a>Legend locations</h2>
<p>In the single charts the legend can be moved around on the plot. There are nine locations that can be specified by keyword: “bottomright”, “bottom”, “bottomleft”, “left”, “topleft”, “top”, “topright”, “right” and “center”. This places the legend on the inside of the plot frame at the given location. Further information can be found in <code>xy.coord</code>. Most compound charts have fixed legend locations.</p>
</div>
<div id="other-parameters" class="section level2">
<h2 class="hasAnchor">
<a href="#other-parameters" class="anchor"></a>Other Parameters</h2>
<p>We have tried to leave access to all of the extensive list of parameters available in ’s traditional graphics. For more information, see <code>plot.default</code> and <code>par</code>. In the example above, we passed <code>lwd</code> the value of 2, which affects the line width. We might also alter the line type or other parameter.</p>
</div>
</div>
<div id="create-charts-and-tables" class="section level1">
<h1 class="hasAnchor">
<a href="#create-charts-and-tables" class="anchor"></a>Create Charts and Tables</h1>
<p>With that, we are ready to analyze the sample data set. This section starts with a set of charts that provide a performance overview, some tables for presenting the data and basic statistics, and then discusses ways to compare distributions, relative performance, and downside risk.</p>
<div id="create-performance-charts" class="section level2">
<h2 class="hasAnchor">
<a href="#create-performance-charts" class="anchor"></a>Create performance charts</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/charts.PerformanceSummary.html">charts.PerformanceSummary</a></span>(
  managers[,<span class="kw">c</span>(manager.col,indexes.cols)],
  <span class="dt">colorset=</span>rich6equal,
  <span class="dt">lwd=</span><span class="dv">2</span>,
  <span class="dt">ylog=</span><span class="ot">TRUE</span>
)</code></pre></div>
<div class="figure">
<img src="pa-charts_files/figure-html/Graph1-1.png" alt="Draw a Performance Summary Chart" width="960"><p class="caption">
Draw a Performance Summary Chart
</p>
</div>
<p>Figure  shows a three-panel performance summary chart and the code used to generate it. The top chart is a normal cumulative return or wealth index chart that shows the cumulative returns through time for each column. For data with later starting times, set the parameter <code>begin = "axis"</code>, which starts the wealth index of all columns at 1, or <code>begin = "first"</code>, which starts the wealth index of each column at the wealth index value attained by the first column of data specified. The second of these settings, which is the default, allows the reader to see how the two indexes would compare had they started at the same time regardless of the starting period. In addition, the y-axis can be set to a logarithmic value so that growth can be compared over long periods. This chart can be generated independently using <code>chart.CumReturns</code>.</p>
<p>The second chart shows the individual monthly returns overlaid with a rolling measure of tail risk referred to as Cornish Fisher Value-at-Risk (VaR) or Modified VaR. Alternative risk measures, including standard deviation (specified as <code>StdDev</code>) and traditional Value-at-Risk (<code>VaR</code>), can be specified using the <code>method} parameter. Note that</code>StdDev} and <code>VaR</code> are symmetric calculations, so a high and low measure will be plotted. <code>ModifiedVaR</code>, on the other hand, is asymmetric and only a lower bound is drawn. These risk calculations are made on a rolling basis from inception, or can be calculated on a rolling window by setting <code>width</code> to a value of the number of periods. These calculations should help the reader to identify events or periods when estimates of tail risk may have changed suddenly, or to help evaluate whether the assumptions underlying the calculation seem to hold . The risk calculations can be generated for all of the columns provided by using the <code>all} parameter. When set to</code>TRUE}, the function calculates risk lines for each column given and may help the reader assess relative risk levels through time. This chart can be generated using <code>chart.BarVaR</code>.</p>
<p>The third chart in the series is a drawdown or underwater chart, which shows the level of losses from the last value of peak equity attained. Any time the cumulative returns dips below the maximum cumulative returns, it’s a drawdown. This chart helps the reader assess the synchronicity of the loss periods and their comparative severity. As you might expect, this chart can also be created using <code>chart.Drawdown</code>.</p>
</div>
<div id="create-a-monthly-returns-table" class="section level2">
<h2 class="hasAnchor">
<a href="#create-a-monthly-returns-table" class="anchor"></a>Create a monthly returns table</h2>
<p>Summary statistics are then the necessary aggregation and reduction of (potentially thousands) of periodic return numbers. Usually these statistics are most palatable when organized into a table of related statistics, assembled for a particular purpose. A common offering of past returns organized by month and accumulated by calendar year is usually presented as a table, such as in <code>table.CalendarReturns</code>.</p>

<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">t</span>(<span class="kw"><a href="../reference/table.CalendarReturns.html">table.CalendarReturns</a></span>(managers[,<span class="kw">c</span>(manager.col,indexes.cols)]))</code></pre></div>
<pre><code>##             1996 1997 1998 1999 2000  2001  2002 2003 2004 2005 2006
## Jan          0.7  2.1  0.6 -0.9 -1.0   0.8   1.4 -4.1  0.5  0.0  6.9
## Feb          1.9  0.2  4.3  0.9  1.2   0.8  -1.2 -2.5  0.0  2.1  1.5
## Mar          1.6  0.9  3.6  4.6  5.8  -1.1   0.6  3.6  0.9 -2.1  4.0
## Apr         -0.9  1.3  0.8  5.1  2.0   3.5   0.5  6.5 -0.4 -2.1 -0.1
## May          0.8  4.4 -2.3  1.6  3.4   5.8  -0.2  3.4  0.8  0.4 -2.7
## Jun         -0.4  2.3  1.2  3.3  1.2   0.2  -2.4  3.1  2.6  1.6  2.2
## Jul         -2.3  1.5 -2.1  1.0  0.5   2.1  -7.5  1.8  0.0  0.9 -1.4
## Aug          4.0  2.4 -9.4 -1.7  3.9   1.6   0.8  0.0  0.5  1.1  1.6
## Sep          1.5  2.2  2.5 -0.4  0.1  -3.1  -5.8  0.9  0.9  2.6  0.7
## Oct          2.9 -2.1  5.6 -0.1 -0.8   0.1   3.0  4.8 -0.1 -1.9  4.3
## Nov          1.6  2.5  1.3  0.4  1.0   3.4   6.6  1.7  3.9  2.3  1.2
## Dec          1.8  1.1  1.0  1.5 -0.7   6.8  -3.2  2.8  4.4  2.6  1.1
## HAM1        13.6 20.4  6.1 16.1 17.7  22.4  -8.0 23.7 14.9  7.8 20.5
## EDHEC LS EQ   NA 21.4 14.6 31.4 12.0  -1.2  -6.4 19.3  8.6 11.3 11.7
## SP500 TR    23.0 33.4 28.6 21.0 -9.1 -11.9 -22.1 28.7 10.9  4.9 15.8</code></pre>
<p>Figure  shows a table of returns formatted with years in rows, months in columns, and a total column in the last column. For additional columns, the annual returns will be appended as columns. Adding benchmarks or peers alongside the annualized data is helpful for comparing returns across calendar years. Because there are a number of columns in the example, we make the output easier to read by using the <code>t</code> function to transpose the resulting data frame.</p>
</div>
<div id="calculate-monthly-statistics" class="section level2">
<h2 class="hasAnchor">
<a href="#calculate-monthly-statistics" class="anchor"></a>Calculate monthly statistics</h2>
<p>Likewise, the monthly returns statistics table in Figure  was created as a way to display a set of related measures together for comparison across a set of instruments or funds. In this example, we are looking at performance {}``from inception’’ for most of the managers, so careful consideration needs to be given to missing data or unequal time series when interpreting the results. Most people will prefer to see such statistics for common or similar periods. Each of the individual functions can be called individually, as well.</p>

<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/table.MonthlyReturns.html">table.Stats</a></span>(managers[,<span class="kw">c</span>(manager.col,peers.cols)])</code></pre></div>
<table class="table">
<thead><tr class="header">
<th></th>
<th align="right">HAM1</th>
<th align="right">HAM2</th>
<th align="right">HAM3</th>
<th align="right">HAM4</th>
<th align="right">HAM5</th>
<th align="right">HAM6</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Observations</td>
<td align="right">132.0000</td>
<td align="right">125.0000</td>
<td align="right">132.0000</td>
<td align="right">132.0000</td>
<td align="right">77.0000</td>
<td align="right">64.0000</td>
</tr>
<tr class="even">
<td>NAs</td>
<td align="right">0.0000</td>
<td align="right">7.0000</td>
<td align="right">0.0000</td>
<td align="right">0.0000</td>
<td align="right">55.0000</td>
<td align="right">68.0000</td>
</tr>
<tr class="odd">
<td>Minimum</td>
<td align="right">-0.0944</td>
<td align="right">-0.0371</td>
<td align="right">-0.0718</td>
<td align="right">-0.1759</td>
<td align="right">-0.1320</td>
<td align="right">-0.0404</td>
</tr>
<tr class="even">
<td>Quartile 1</td>
<td align="right">0.0000</td>
<td align="right">-0.0098</td>
<td align="right">-0.0054</td>
<td align="right">-0.0198</td>
<td align="right">-0.0164</td>
<td align="right">-0.0016</td>
</tr>
<tr class="odd">
<td>Median</td>
<td align="right">0.0112</td>
<td align="right">0.0082</td>
<td align="right">0.0102</td>
<td align="right">0.0138</td>
<td align="right">0.0038</td>
<td align="right">0.0128</td>
</tr>
<tr class="even">
<td>Arithmetic Mean</td>
<td align="right">0.0111</td>
<td align="right">0.0141</td>
<td align="right">0.0124</td>
<td align="right">0.0110</td>
<td align="right">0.0041</td>
<td align="right">0.0111</td>
</tr>
<tr class="odd">
<td>Geometric Mean</td>
<td align="right">0.0108</td>
<td align="right">0.0135</td>
<td align="right">0.0118</td>
<td align="right">0.0096</td>
<td align="right">0.0031</td>
<td align="right">0.0108</td>
</tr>
<tr class="even">
<td>Quartile 3</td>
<td align="right">0.0248</td>
<td align="right">0.0252</td>
<td align="right">0.0314</td>
<td align="right">0.0460</td>
<td align="right">0.0309</td>
<td align="right">0.0255</td>
</tr>
<tr class="odd">
<td>Maximum</td>
<td align="right">0.0692</td>
<td align="right">0.1556</td>
<td align="right">0.1796</td>
<td align="right">0.1508</td>
<td align="right">0.1747</td>
<td align="right">0.0583</td>
</tr>
<tr class="even">
<td>SE Mean</td>
<td align="right">0.0022</td>
<td align="right">0.0033</td>
<td align="right">0.0032</td>
<td align="right">0.0046</td>
<td align="right">0.0052</td>
<td align="right">0.0030</td>
</tr>
<tr class="odd">
<td>LCL Mean (0.95)</td>
<td align="right">0.0067</td>
<td align="right">0.0076</td>
<td align="right">0.0062</td>
<td align="right">0.0019</td>
<td align="right">-0.0063</td>
<td align="right">0.0051</td>
</tr>
<tr class="even">
<td>UCL Mean (0.95)</td>
<td align="right">0.0155</td>
<td align="right">0.0206</td>
<td align="right">0.0187</td>
<td align="right">0.0202</td>
<td align="right">0.0145</td>
<td align="right">0.0170</td>
</tr>
<tr class="odd">
<td>Variance</td>
<td align="right">0.0007</td>
<td align="right">0.0013</td>
<td align="right">0.0013</td>
<td align="right">0.0028</td>
<td align="right">0.0021</td>
<td align="right">0.0006</td>
</tr>
<tr class="even">
<td>Stdev</td>
<td align="right">0.0256</td>
<td align="right">0.0367</td>
<td align="right">0.0365</td>
<td align="right">0.0532</td>
<td align="right">0.0457</td>
<td align="right">0.0238</td>
</tr>
<tr class="odd">
<td>Skewness</td>
<td align="right">-0.6588</td>
<td align="right">1.4580</td>
<td align="right">0.7908</td>
<td align="right">-0.4311</td>
<td align="right">0.0738</td>
<td align="right">-0.2800</td>
</tr>
<tr class="even">
<td>Kurtosis</td>
<td align="right">2.3616</td>
<td align="right">2.3794</td>
<td align="right">2.6829</td>
<td align="right">0.8632</td>
<td align="right">2.3143</td>
<td align="right">-0.3489</td>
</tr>
</tbody>
</table>
<p>When we started this project, we debated whether or not such tables would be broadly useful or not. No reader is likely to think that we captured the precise statistics to help their decision. We merely offer these as a starting point for creating your own. Add, subtract, do whatever seems useful to you. If you think that your work may be useful to others, please consider sharing it so that we may include it in a future version of this library.</p>
</div>
<div id="compare-distributions" class="section level2">
<h2 class="hasAnchor">
<a href="#compare-distributions" class="anchor"></a>Compare distributions</h2>
<p>For distributional analysis, a few graphics may be useful. The result of <code>chart.Boxplot</code>, shown in Figure , is an example of a graphic that is difficult to create in Excel and is under-utilized as a result. A boxplot of returns is, however, a very useful way to observe the shape of large collections of asset returns in a manner that makes them easy to compare to one another.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/chart.Boxplot.html">chart.Boxplot</a></span>(
  managers[ trailing36.rows, <span class="kw">c</span>(manager.col, peers.cols, indexes.cols)],
  <span class="dt">main =</span> <span class="st">"Trailing 36-Month Returns"</span>
)</code></pre></div>
<div class="figure">
<img src="pa-charts_files/figure-html/Graph10-1.png" alt="Create a Boxplot" width="960"><p class="caption">
Create a Boxplot
</p>
</div>
<p>It is often valuable when evaluating an investment to know whether the instrument that you are examining follows a normal distribution. One of the first methods to determine how close the asset is to a normal or log-normal distribution is to visually look at your data. Both <code>chart.QQPlot</code> and <code>chart.Histogram</code> will quickly give you a feel for whether or not you are looking at a normally distributed return history. Figure  shows a histogram generated for HAM1 with different display options.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">layout</span>(<span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>),<span class="kw">c</span>(<span class="dv">3</span>,<span class="dv">4</span>)))
<span class="kw"><a href="../reference/chart.Histogram.html">chart.Histogram</a></span>(managers[,<span class="dv">1</span>,<span class="dt">drop=</span>F], <span class="dt">main =</span> <span class="st">"Plain"</span>, <span class="dt">methods =</span> <span class="ot">NULL</span>)
<span class="kw"><a href="../reference/chart.Histogram.html">chart.Histogram</a></span>(managers[,<span class="dv">1</span>,<span class="dt">drop=</span>F], <span class="dt">main =</span> <span class="st">"Density"</span>, <span class="dt">breaks=</span><span class="dv">40</span>,
<span class="dt">methods =</span> <span class="kw">c</span>(<span class="st">"add.density"</span>, <span class="st">"add.normal"</span>))
<span class="kw"><a href="../reference/chart.Histogram.html">chart.Histogram</a></span>(managers[,<span class="dv">1</span>,<span class="dt">drop=</span>F], <span class="dt">main =</span> <span class="st">"Skew and Kurt"</span>, <span class="dt">methods =</span> c
(<span class="st">"add.centered"</span>, <span class="st">"add.rug"</span>))
<span class="kw"><a href="../reference/chart.Histogram.html">chart.Histogram</a></span>(managers[,<span class="dv">1</span>,<span class="dt">drop=</span>F], <span class="dt">main =</span> <span class="st">"Risk Measures"</span>, <span class="dt">methods =</span> c
(<span class="st">"add.risk"</span>))</code></pre></div>
<div class="figure">
<img src="pa-charts_files/figure-html/Graph13-1.png" alt="Create a Histogram of Returns" width="576"><p class="caption">
Create a Histogram of Returns
</p>
</div>
<p>Look back at the results generated by <code>table.Stats</code>. Differences between <code>var</code> and <code>SemiVariance</code> will help you identify <code>fBasics::skewness</code> in the returns. Skewness measures the degree of asymmetry in the return distribution. Positive skewness indicates that more of the returns are positive, negative skewness indicates that more of the returns are negative. An investor should in most cases prefer a positively skewed asset to a similar (style, industry, region) asset that has a negative skewness. Kurtosis measures the concentration of the returns in any given part of the distribution (as you should see visually in a histogram). The <code>fBasics::kurtosis</code> function will by default return what is referred to as “excess kurtosis”, where zero is a normal distribution, other methods of calculating kurtosis than <code>method="excess"</code> will set the normal distribution at a value of 3. In general a rational investor should prefer an asset with a low to negative excess kurtosis, as this will indicate more predictable returns. If you find yourself needing to analyze the distribution of complex or non-smooth asset distributions, the <code>nortest</code> package has several advanced statistical tests for analyzing the normality of a distribution.</p>
</div>
<div id="show-relative-return-and-risk" class="section level2">
<h2 class="hasAnchor">
<a href="#show-relative-return-and-risk" class="anchor"></a>Show relative return and risk</h2>
<p>Returns and risk may be annualized as a way to simplify comparison over longer time periods. Although it requires a bit of estimating, such aggregation is popular because it offers a reference point for easy comparison, such as in Figure . Examples are in <code>Return.annualized</code>, <code>StdDev.annualized</code>, and <code>SharpeRatio.annualized</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/chart.RiskReturnScatter.html">chart.RiskReturnScatter</a></span>(managers[trailing36.rows,<span class="dv">1</span><span class="op">:</span><span class="dv">8</span>], <span class="dt">Rf=</span>.<span class="dv">03</span><span class="op">/</span><span class="dv">12</span>, <span class="dt">main =</span> <span class="st">"Trailing 36-Month Performance"</span>, <span class="dt">colorset=</span><span class="kw">c</span>(<span class="st">"red"</span>, <span class="kw">rep</span>(<span class="st">"black"</span>,<span class="dv">5</span>), <span class="st">"orange"</span>, <span class="st">"green"</span>))</code></pre></div>
<div class="figure">
<img src="pa-charts_files/figure-html/Graph3-1.png" alt="Show Relative Risk and Return" width="960"><p class="caption">
Show Relative Risk and Return
</p>
</div>
<p><code>chart.Scatter</code> is a utility scatter chart with some additional attributes that are used in <code>chart.RiskReturnScatter</code>. Different risk parameters may be used. The parameter <code>method</code> may be any of <code>modVaR</code>, <code>VaR</code>, or <code>StdDev</code>.</p>
<p>Additional information can be overlaid, as well. If <code>add.sharpe</code> is set to a value, say <code>c(1,2,3)</code>, the function overlays Sharpe ratio line that indicates Sharpe ratio levels of one through three. Lines are drawn with a y-intercept of the risk free rate (<code>rf</code>) and the slope of the appropriate Sharpe ratio level. Lines should be removed where not appropriate (e.g., <code>sharpe.ratio = NULL</code>). With a large number of assets (or columns), the names may get in the way. To remove them, set <code>add.names = NULL</code>. A box plot may be added to the margins to help identify the relative performance quartile by setting <code>add.boxplots = TRUE</code>.</p>
</div>
<div id="examine-performance-consistency" class="section level2">
<h2 class="hasAnchor">
<a href="#examine-performance-consistency" class="anchor"></a>Examine performance consistency</h2>
<p>Rolling performance is typically used as a way to assess stability of a return stream. Although perhaps it doesn’t get much credence in the financial literature because of it’s roots in digital signal processing, many practitioners find rolling performance to be a useful way to examine and segment performance and risk periods. See <code>chart.RollingPerformance</code>, which is a way to display different metrics over rolling time periods.</p>
<p>Figure  shows three panels, the first for rolling returns, the second for rolling standard deviation, and the third for rolling Sharpe ratio. These three panels each call <code>chart.RollingPerformance</code> with a different <code>FUN</code> argument, allowing any function to be viewed over a rolling window.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/charts.RollingPerformance.html">charts.RollingPerformance</a></span>(managers[, <span class="kw">c</span>(manager.col, peers.cols, indexes.cols)], <span class="dt">Rf=</span>.<span class="dv">03</span><span class="op">/</span><span class="dv">12</span>, <span class="dt">colorset =</span> <span class="kw">c</span>(<span class="st">"red"</span>, <span class="kw">rep</span>(<span class="st">"darkgray"</span>,<span class="dv">5</span>), <span class="st">"orange"</span>, <span class="st">"green"</span>), <span class="dt">lwd =</span> <span class="dv">2</span>)</code></pre></div>
<div class="figure">
<img src="pa-charts_files/figure-html/Graph5-1.png" alt="Examine Rolling Performance" width="960"><p class="caption">
Examine Rolling Performance
</p>
</div>
</div>
<div id="display-relative-performance" class="section level2">
<h2 class="hasAnchor">
<a href="#display-relative-performance" class="anchor"></a>Display relative performance</h2>
<p>The function <code>chart.RelativePerformance</code> shows the ratio of the cumulative performance for two assets at each point in time and makes periods of under- or out-performance easy to see. The value of the chart is less important than the slope of the line. If the slope is positive, the first asset (numerator) is outperforming the second, and vice versa. Figure  shows the returns of the manager in question relative to each member of the peer group and the peer group index.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/chart.RelativePerformance.html">chart.RelativePerformance</a></span>(managers[ , manager.col, <span class="dt">drop =</span> <span class="ot">FALSE</span>], managers[ , <span class="kw">c</span>(peers.cols, <span class="dv">7</span>)], <span class="dt">colorset =</span> tim8equal[<span class="op">-</span><span class="dv">1</span>], <span class="dt">lwd =</span> <span class="dv">2</span>, <span class="dt">legend.loc =</span> <span class="st">"topleft"</span>)</code></pre></div>
<div class="figure">
<img src="pa-charts_files/figure-html/Graph6-1.png" alt="Examine Relative Performance of Assets" width="960"><p class="caption">
Examine Relative Performance of Assets
</p>
</div>
<p>Looking at the data another way, we use the same chart to assess the peers individually against the asset class index. Figure  shows the peer group members’ returns relative to the S&amp;P 500. Several questions might arise: Who beats the S&amp;P? Can they do it consistently? Are there cycles when they under-perform or outperform as a group? Which manager has outperformed the most?</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/chart.RelativePerformance.html">chart.RelativePerformance</a></span>(managers[ , <span class="kw">c</span>(manager.col, peers.cols) ], managers[, <span class="dv">8</span>, <span class="dt">drop=</span>F], <span class="dt">colorset =</span> rainbow8equal, <span class="dt">lwd =</span> <span class="dv">2</span>, <span class="dt">legend.loc =</span> <span class="st">"topleft"</span>)</code></pre></div>
<div class="figure">
<img src="pa-charts_files/figure-html/Graph6a-1.png" alt="Examine Performance Relative to a Benchmark" width="960"><p class="caption">
Examine Performance Relative to a Benchmark
</p>
</div>
</div>
<div id="measure-relative-performance-to-a-benchmark" class="section level2">
<h2 class="hasAnchor">
<a href="#measure-relative-performance-to-a-benchmark" class="anchor"></a>Measure relative performance to a benchmark}</h2>
<p>Identifying and using a benchmark can help us assess and explain how well we are meeting our investment objectives, in terms of a widely held substitute. A benchmark can help us explain how the portfolios are managed, assess the risk taken and the return desired, and check that the objectives were respected. Benchmarks are used to get better control of the investment management process and to suggest ways to improve selection.</p>
<p>Modern Portfolio Theory is a collection of tools and techniques by which a risk-averse investor may construct an optimal portfolio. It encompasses the Capital Asset Pricing Model (CAPM), the efficient market hypothesis, and all forms of quantitative portfolio construction and optimization. CAPM provides a justification for passive or index investing by positing that assets that are not on the efficient frontier will either rise or lower in price until they are on the efficient frontier of the market portfolio.</p>

<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/table.CAPM.html">table.CAPM</a></span>(managers[trailing36.rows, <span class="kw">c</span>(manager.col, peers.cols)],
managers[ trailing36.rows, <span class="dv">8</span>, <span class="dt">drop=</span><span class="ot">FALSE</span>],
<span class="dt">Rf =</span> managers[ trailing36.rows, Rf.col, <span class="dt">drop=</span><span class="ot">FALSE</span>])</code></pre></div>
<table class="table">
<thead><tr class="header">
<th></th>
<th align="right">HAM1.to.SP500.TR</th>
<th align="right">HAM2.to.SP500.TR</th>
<th align="right">HAM3.to.SP500.TR</th>
<th align="right">HAM4.to.SP500.TR</th>
<th align="right">HAM5.to.SP500.TR</th>
<th align="right">HAM6.to.SP500.TR</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Alpha</td>
<td align="right">0.0051</td>
<td align="right">0.0020</td>
<td align="right">0.0020</td>
<td align="right">0.0009</td>
<td align="right">0.0002</td>
<td align="right">0.0022</td>
</tr>
<tr class="even">
<td>Beta</td>
<td align="right">0.6267</td>
<td align="right">0.3223</td>
<td align="right">0.6320</td>
<td align="right">1.1282</td>
<td align="right">0.8755</td>
<td align="right">0.8150</td>
</tr>
<tr class="odd">
<td>Beta+</td>
<td align="right">0.8227</td>
<td align="right">0.4176</td>
<td align="right">0.8240</td>
<td align="right">1.8430</td>
<td align="right">1.0985</td>
<td align="right">0.9993</td>
</tr>
<tr class="even">
<td>Beta-</td>
<td align="right">1.1218</td>
<td align="right">-0.0483</td>
<td align="right">0.8291</td>
<td align="right">1.2223</td>
<td align="right">0.5283</td>
<td align="right">1.1320</td>
</tr>
<tr class="odd">
<td>R-squared</td>
<td align="right">0.3829</td>
<td align="right">0.1073</td>
<td align="right">0.4812</td>
<td align="right">0.3444</td>
<td align="right">0.5209</td>
<td align="right">0.4757</td>
</tr>
<tr class="even">
<td>Annualized Alpha</td>
<td align="right">0.0631</td>
<td align="right">0.0247</td>
<td align="right">0.0243</td>
<td align="right">0.0109</td>
<td align="right">0.0030</td>
<td align="right">0.0271</td>
</tr>
<tr class="odd">
<td>Correlation</td>
<td align="right">0.6188</td>
<td align="right">0.3276</td>
<td align="right">0.6937</td>
<td align="right">0.5868</td>
<td align="right">0.7218</td>
<td align="right">0.6897</td>
</tr>
<tr class="even">
<td>Correlation p-value</td>
<td align="right">0.0001</td>
<td align="right">0.0511</td>
<td align="right">0.0000</td>
<td align="right">0.0002</td>
<td align="right">0.0000</td>
<td align="right">0.0000</td>
</tr>
<tr class="odd">
<td>Tracking Error</td>
<td align="right">0.0604</td>
<td align="right">0.0790</td>
<td align="right">0.0517</td>
<td align="right">0.1073</td>
<td align="right">0.0583</td>
<td align="right">0.0601</td>
</tr>
<tr class="even">
<td>Active Premium</td>
<td align="right">0.0384</td>
<td align="right">-0.0260</td>
<td align="right">-0.0022</td>
<td align="right">0.0154</td>
<td align="right">-0.0077</td>
<td align="right">0.0138</td>
</tr>
<tr class="odd">
<td>Information Ratio</td>
<td align="right">0.6363</td>
<td align="right">-0.3295</td>
<td align="right">-0.0428</td>
<td align="right">0.1433</td>
<td align="right">-0.1319</td>
<td align="right">0.2296</td>
</tr>
<tr class="even">
<td>Treynor Ratio</td>
<td align="right">0.1741</td>
<td align="right">0.1437</td>
<td align="right">0.1101</td>
<td align="right">0.0768</td>
<td align="right">0.0734</td>
<td align="right">0.1045</td>
</tr>
</tbody>
</table>
<p>The performance premium provided by an investment over a passive strategy (the benchmark) is provided by <code>ActivePremium</code>, which is the investment’s annualized return minus the benchmark’s annualized return. A closely related measure is the <code>TrackingError</code>, which measures the unexplained portion of the investment’s performance relative to a benchmark. The <code>InformationRatio</code> of an Investment in a MPT or CAPM framework is the <code>ActivePremium</code> divided by the <code>TrackingError</code>. <code>InformationRatio</code> may be used to rank investments in a relative fashion.</p>
<p>The code in Figure  creates a table of CAPM-related statistics that we can review and compare across managers. Note that we focus on the trailing-36 month period. There are, in addition to those listed, a wide variety of other CAPM-related metrics available. The <code>CAPM.RiskPremium</code> on an investment is the measure of how much the asset’s performance differs from the risk free rate. Negative Risk Premium generally indicates that the investment is a bad investment, and the money should be allocated to the risk free asset or to a different asset with a higher risk premium. <code>CAPM.alpha</code> is the degree to which the assets returns are not due to the return that could be captured from the market. Conversely, <code>CAPM.beta</code> describes the portions of the returns of the asset that could be directly attributed to the returns of a passive investment in the benchmark asset. The Capital Market Line <code>CAPM.CML</code> relates the excess expected return on an efficient market portfolio to its risk (represented in CAPM by <code>StdDev</code>). The slope of the CML, <code>CAPM.CML.slope</code>, is the Sharpe Ratio for the market portfolio. The Security Market Line is constructed by calculating the line of <code>CAPM.RiskPremium</code> over <code>CAPM.beta</code>. For the benchmark asset this will be 1 over the risk premium of the benchmark asset. The slope of the SML, primarily for plotting purposes, is given by <code>CAPM.SML.slope</code>. CAPM is a market equilibrium model or a general equilibrium theory of the relation of prices to risk, but it is usually applied to partial equilibrium portfolios which can create (sometimes serious) problems in valuation.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#source("chart.MultiScatter.R")</span>
<span class="co">#chart.MultiScatter(Ra=managers[,1,drop=F],Rb=managers[,8,drop=F],linear.fit=T,Rf=managers[,10],excess.returns=T)</span></code></pre></div>
<p>In a similar fashion to the rolling performance we displayed earlier, we can look at the stability of a linear model’s parameters through time. Figure  shows a three panel chart for the alpha, beta, and r-squared measures through time across a rolling window. Each chart calls <code>chart.RollingRegression</code> with a different <code>method</code> parameter.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">charts.RollingRegression</span>(managers[, <span class="kw">c</span>(manager.col, peers.cols), <span class="dt">drop =</span> <span class="ot">FALSE</span>], managers[, <span class="dv">8</span>, <span class="dt">drop =</span> <span class="ot">FALSE</span>], <span class="dt">Rf =</span> .<span class="dv">03</span><span class="op">/</span><span class="dv">12</span>, <span class="dt">colorset =</span> redfocus, <span class="dt">lwd =</span> <span class="dv">2</span>)</code></pre></div>
<div class="figure">
<img src="pa-charts_files/figure-html/Graph8-1.png" alt="Create a Rolling Regression" width="960"><p class="caption">
Create a Rolling Regression
</p>
</div>
<p>Likewise, we can assess whether the correlation between two time series is constant through time. Figure  shows the rolling 12-month correlation between each of the peer group and the S&amp;P500. To look at the relationships over time and take a snapshot of the statistical relevance of the measure, use <code>table.Correlation</code>, as shown in Figure .</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/chart.RollingCorrelation.html">chart.RollingCorrelation</a></span>(managers[,<span class="kw">c</span>(manager.col, peers.cols)], managers[, <span class="dv">8</span>, <span class="dt">drop =</span> <span class="ot">FALSE</span>], <span class="dt">colorset =</span> tim8equal, <span class="dt">lwd =</span> <span class="dv">2</span>, <span class="dt">main =</span> <span class="st">"12-Month Rolling Correlation"</span>)</code></pre></div>
<div class="figure">
<img src="pa-charts_files/figure-html/Graph9-1.png" alt="Chart the Rolling Correlation" width="960"><p class="caption">
Chart the Rolling Correlation
</p>
</div>

<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/table.Correlation.html">table.Correlation</a></span>(managers[, <span class="kw">c</span>(manager.col, peers.cols)], managers[, <span class="dv">8</span>,
<span class="dt">drop =</span> F], <span class="dt">legend.loc =</span> <span class="st">"lowerleft"</span>)</code></pre></div>
<table class="table">
<thead><tr class="header">
<th></th>
<th align="right">Correlation</th>
<th align="right">p.value</th>
<th align="right">Lower.CI</th>
<th align="right">Upper.CI</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>HAM1 to SP500 TR</td>
<td align="right">0.6600671</td>
<td align="right">0.0000000</td>
<td align="right">0.5513838</td>
<td align="right">0.7467191</td>
</tr>
<tr class="even">
<td>HAM2 to SP500 TR</td>
<td align="right">0.4128282</td>
<td align="right">0.0000017</td>
<td align="right">0.2557624</td>
<td align="right">0.5486602</td>
</tr>
<tr class="odd">
<td>HAM3 to SP500 TR</td>
<td align="right">0.6608633</td>
<td align="right">0.0000000</td>
<td align="right">0.5523659</td>
<td align="right">0.7473433</td>
</tr>
<tr class="even">
<td>HAM4 to SP500 TR</td>
<td align="right">0.5601846</td>
<td align="right">0.0000000</td>
<td align="right">0.4305217</td>
<td align="right">0.6671932</td>
</tr>
<tr class="odd">
<td>HAM5 to SP500 TR</td>
<td align="right">0.2844487</td>
<td align="right">0.0121683</td>
<td align="right">0.0645846</td>
<td align="right">0.4779755</td>
</tr>
<tr class="even">
<td>HAM6 to SP500 TR</td>
<td align="right">0.5091542</td>
<td align="right">0.0000174</td>
<td align="right">0.3010189</td>
<td align="right">0.6709863</td>
</tr>
</tbody>
</table>
</div>
<div id="calculate-downside-risk" class="section level2">
<h2 class="hasAnchor">
<a href="#calculate-downside-risk" class="anchor"></a>Calculate Downside Risk</h2>
<p>Many assets, including hedge funds, commodities, options, and even most common stocks over a sufficiently long period, do not follow a normal distribution. For such common but non-normally distributed assets, a more sophisticated approach than standard deviation/volatility is required to adequately model the risk.</p>
<p>Markowitz, in his Nobel acceptance speech and in several papers, proposed that <code>SemiVariance</code> would be a better measure of risk than variance. This measure is also called <code>SemiDeviation</code>. The more general case of downside deviation is implemented in the function <code>DownsideDeviation</code>, as proposed by Sortino and Price (1994), where the minimum acceptable return (MAR) is a parameter to the function. It is interesting to note that variance and mean return can produce a smoothly elliptical efficient frontier for portfolio optimization utilizing <code><a href="http://www.rdocumentation.org/packages/quadprog/topics/solve.QP">quadprog::solve.QP</a></code> or <code>tseries::portfolio.optim</code> or <code>fPortfolio::MarkowitzPortfolio</code>. Use of semivariance or many other risk measures will not necessarily create a smooth ellipse, causing significant additional difficulties for the portfolio manager trying to build an optimal portfolio. We’ll leave a more complete treatment and implementation of portfolio optimization techniques for another time.</p>

<p>\begin{center}</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/table.DownsideRisk.html">table.DownsideRisk</a></span>(managers[,<span class="dv">1</span><span class="op">:</span><span class="dv">6</span>],<span class="dt">Rf=</span>.<span class="dv">03</span><span class="op">/</span><span class="dv">12</span>)</code></pre></div>
<table class="table">
<thead><tr class="header">
<th></th>
<th align="right">HAM1</th>
<th align="right">HAM2</th>
<th align="right">HAM3</th>
<th align="right">HAM4</th>
<th align="right">HAM5</th>
<th align="right">HAM6</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Semi Deviation</td>
<td align="right">0.0191</td>
<td align="right">0.0201</td>
<td align="right">0.0237</td>
<td align="right">0.0395</td>
<td align="right">0.0324</td>
<td align="right">0.0175</td>
</tr>
<tr class="even">
<td>Gain Deviation</td>
<td align="right">0.0169</td>
<td align="right">0.0347</td>
<td align="right">0.0290</td>
<td align="right">0.0311</td>
<td align="right">0.0313</td>
<td align="right">0.0149</td>
</tr>
<tr class="odd">
<td>Loss Deviation</td>
<td align="right">0.0211</td>
<td align="right">0.0107</td>
<td align="right">0.0191</td>
<td align="right">0.0365</td>
<td align="right">0.0324</td>
<td align="right">0.0128</td>
</tr>
<tr class="even">
<td>Downside Deviation (MAR=10%)</td>
<td align="right">0.0178</td>
<td align="right">0.0164</td>
<td align="right">0.0214</td>
<td align="right">0.0381</td>
<td align="right">0.0347</td>
<td align="right">0.0161</td>
</tr>
<tr class="odd">
<td>Downside Deviation (Rf=3%)</td>
<td align="right">0.0154</td>
<td align="right">0.0129</td>
<td align="right">0.0185</td>
<td align="right">0.0353</td>
<td align="right">0.0316</td>
<td align="right">0.0133</td>
</tr>
<tr class="even">
<td>Downside Deviation (0%)</td>
<td align="right">0.0145</td>
<td align="right">0.0116</td>
<td align="right">0.0174</td>
<td align="right">0.0341</td>
<td align="right">0.0304</td>
<td align="right">0.0121</td>
</tr>
<tr class="odd">
<td>Maximum Drawdown</td>
<td align="right">0.1518</td>
<td align="right">0.2399</td>
<td align="right">0.2894</td>
<td align="right">0.2874</td>
<td align="right">0.3405</td>
<td align="right">0.0788</td>
</tr>
<tr class="even">
<td>Historical VaR (95%)</td>
<td align="right">-0.0258</td>
<td align="right">-0.0294</td>
<td align="right">-0.0425</td>
<td align="right">-0.0799</td>
<td align="right">-0.0733</td>
<td align="right">-0.0341</td>
</tr>
<tr class="odd">
<td>Historical ES (95%)</td>
<td align="right">-0.0513</td>
<td align="right">-0.0331</td>
<td align="right">-0.0555</td>
<td align="right">-0.1122</td>
<td align="right">-0.1023</td>
<td align="right">-0.0392</td>
</tr>
<tr class="even">
<td>Modified VaR (95%)</td>
<td align="right">-0.0342</td>
<td align="right">-0.0276</td>
<td align="right">-0.0368</td>
<td align="right">-0.0815</td>
<td align="right">-0.0676</td>
<td align="right">-0.0298</td>
</tr>
<tr class="odd">
<td>Modified ES (95%)</td>
<td align="right">-0.0610</td>
<td align="right">-0.0614</td>
<td align="right">-0.0440</td>
<td align="right">-0.1176</td>
<td align="right">-0.0974</td>
<td align="right">-0.0390</td>
</tr>
</tbody>
</table>
<p>Another very widely used downside risk measures is analysis of drawdowns, or loss from peak value achieved. The simplest method is to check the <code>maxDrawdown</code>, as this will tell you the worst cumulative loss ever sustained by the asset. If you want to look at all the drawdowns, you can use <code>table.Drawdowns</code> to find and sort them in order from worst/major to smallest/minor, as shown in Figure .</p>

<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/table.Drawdowns.html">table.Drawdowns</a></span>(managers[,<span class="dv">1</span>,<span class="dt">drop=</span>F])</code></pre></div>
<table class="table">
<thead><tr class="header">
<th></th>
<th align="left">From</th>
<th align="left">Trough</th>
<th align="left">To</th>
<th align="right">Depth</th>
<th align="right">Length</th>
<th align="right">To.Trough</th>
<th align="right">Recovery</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>1</td>
<td align="left">2002-02-28</td>
<td align="left">2003-02-28</td>
<td align="left">2003-07-31</td>
<td align="right">-0.1518</td>
<td align="right">18</td>
<td align="right">13</td>
<td align="right">5</td>
</tr>
<tr class="even">
<td>2</td>
<td align="left">1998-05-31</td>
<td align="left">1998-08-31</td>
<td align="left">1999-03-31</td>
<td align="right">-0.1239</td>
<td align="right">11</td>
<td align="right">4</td>
<td align="right">7</td>
</tr>
<tr class="odd">
<td>3</td>
<td align="left">2005-03-31</td>
<td align="left">2005-04-30</td>
<td align="left">2005-09-30</td>
<td align="right">-0.0412</td>
<td align="right">7</td>
<td align="right">2</td>
<td align="right">5</td>
</tr>
<tr class="even">
<td>4</td>
<td align="left">2001-09-30</td>
<td align="left">2001-09-30</td>
<td align="left">2001-11-30</td>
<td align="right">-0.0312</td>
<td align="right">3</td>
<td align="right">1</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td>5</td>
<td align="left">1996-04-30</td>
<td align="left">1996-07-31</td>
<td align="left">1996-08-31</td>
<td align="right">-0.0284</td>
<td align="right">5</td>
<td align="right">4</td>
<td align="right">1</td>
</tr>
</tbody>
</table>
<p>The <code>UpDownRatios</code> function may give you some insight into the impacts of the skewness and kurtosis of the returns, and letting you know how length and magnitude of up or down moves compare to each other. Or, as mentioned above, you can also plot drawdowns with <code>chart.Drawdown</code>.</p>
</div>
</div>
<div id="conclusion" class="section level1">
<h1 class="hasAnchor">
<a href="#conclusion" class="anchor"></a>Conclusion</h1>
<p>With that short overview of a few of the capabilities provided by <code>PerformanceAnalytics</code>, we hope that the accompanying package and documentation will partially fill a hole in the tools available to a financial engineer or analyst. If you think there’s an important gap or possible improvement to be made, please don’t hesitate to contact us.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#abstract">Abstract</a></li>
      <li><a href="#introduction">Introduction</a></li>
      <li>
<a href="#set-up-performanceanalytics">Set up PerformanceAnalytics</a><ul class="nav nav-pills nav-stacked">
<li><a href="#install-performanceanalytics">Install PerformanceAnalytics</a></li>
      <li><a href="#load-and-review-data">Load and review data</a></li>
      <li><a href="#create-charts-and-tables-for-presentation">Create charts and tables for presentation</a></li>
      <li><a href="#color-palettes">Color Palettes</a></li>
      <li><a href="#symbols">Symbols</a></li>
      <li><a href="#legend-locations">Legend locations</a></li>
      <li><a href="#other-parameters">Other Parameters</a></li>
      </ul>
</li>
      <li>
<a href="#create-charts-and-tables">Create Charts and Tables</a><ul class="nav nav-pills nav-stacked">
<li><a href="#create-performance-charts">Create performance charts</a></li>
      <li><a href="#create-a-monthly-returns-table">Create a monthly returns table</a></li>
      <li><a href="#calculate-monthly-statistics">Calculate monthly statistics</a></li>
      <li><a href="#compare-distributions">Compare distributions</a></li>
      <li><a href="#show-relative-return-and-risk">Show relative return and risk</a></li>
      <li><a href="#examine-performance-consistency">Examine performance consistency</a></li>
      <li><a href="#display-relative-performance">Display relative performance</a></li>
      <li><a href="#measure-relative-performance-to-a-benchmark">Measure relative performance to a benchmark}</a></li>
      <li><a href="#calculate-downside-risk">Calculate Downside Risk</a></li>
      </ul>
</li>
      <li><a href="#conclusion">Conclusion</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Brian G. Peterson, Peter Carl.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
