<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>calculate various Value at Risk (VaR) measures — VaR â€¢ PerformanceAnalytics</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>
  
  
<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">PerformanceAnalytics</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/pa-charts.html">PerformanceAnalytics Charts and Tables Overview</a>
    </li>
  </ul>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/braverock/PerformanceAnalytics">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>calculate various Value at Risk (VaR) measures</h1>
    </div>

    
    <p>Calculates Value-at-Risk(VaR) for univariate, component, and marginal cases
using a variety of analytical methods.</p>
    

    <pre class="usage"><span class='fu'>VaR</span>(<span class='kw'>R</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>p</span> <span class='kw'>=</span> <span class='fl'>0.95</span>, <span class='no'>...</span>, <span class='kw'>method</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"modified"</span>, <span class='st'>"gaussian"</span>,
  <span class='st'>"historical"</span>, <span class='st'>"kernel"</span>), <span class='kw'>clean</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"none"</span>, <span class='st'>"boudt"</span>, <span class='st'>"geltner"</span>),
  <span class='kw'>portfolio_method</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"single"</span>, <span class='st'>"component"</span>, <span class='st'>"marginal"</span>), <span class='kw'>weights</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>mu</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>sigma</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>m3</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>m4</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>invert</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>R</th>
      <td><p>an xts, vector, matrix, data frame, timeSeries or zoo object of
asset returns</p></td>
    </tr>
    <tr>
      <th>p</th>
      <td><p>confidence level for calculation, default p=.95</p></td>
    </tr>
    <tr>
      <th>&#8230;</th>
      <td><p>any other passthru parameters</p></td>
    </tr>
    <tr>
      <th>method</th>
      <td><p>one of "modified","gaussian","historical", "kernel", see
Details.</p></td>
    </tr>
    <tr>
      <th>clean</th>
      <td><p>method for data cleaning through <code><a href='Return.clean.html'>Return.clean</a></code>.
Current options are "none", "boudt", or "geltner".</p></td>
    </tr>
    <tr>
      <th>portfolio_method</th>
      <td><p>one of "single","component","marginal" defining
whether to do univariate, component, or marginal calc, see Details.</p></td>
    </tr>
    <tr>
      <th>weights</th>
      <td><p>portfolio weighting vector, default NULL, see Details</p></td>
    </tr>
    <tr>
      <th>mu</th>
      <td><p>If univariate, mu is the mean of the series. Otherwise mu is the
vector of means of the return series, default NULL, see Details</p></td>
    </tr>
    <tr>
      <th>sigma</th>
      <td><p>If univariate, sigma is the variance of the series. Otherwise
sigma is the covariance matrix of the return series, default NULL, see
Details</p></td>
    </tr>
    <tr>
      <th>m3</th>
      <td><p>If univariate, m3 is the skewness of the series. Otherwise m3 is
the coskewness matrix (or vector with unique coskewness values) of the 
returns series, default NULL, see Details</p></td>
    </tr>
    <tr>
      <th>m4</th>
      <td><p>If univariate, m4 is the excess kurtosis of the series. Otherwise
m4 is the cokurtosis matrix (or vector with unique cokurtosis values) of the 
return series, default NULL, see Details</p></td>
    </tr>
    <tr>
      <th>invert</th>
      <td><p>TRUE/FALSE whether to invert the VaR measure.  see Details.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="note"><a class="anchor" href="#note"></a>Note</h2>

    <p>The option to <code>invert</code> the VaR measure should appease both
academics and practitioners.  The mathematical definition of VaR as the
negative value of a quantile will (usually) produce a positive number.
Practitioners will argue that VaR denotes a loss, and should be internally
consistent with the quantile (a negative number).  For tables and charts,
different preferences may apply for clarity and compactness.  As such, we
provide the option, and set the default to TRUE to keep the return
consistent with prior versions of PerformanceAnalytics, but make no value
judgment on which approach is preferable.</p>
<p>The prototype of the univariate Cornish Fisher VaR function was completed by
Prof. Diethelm Wuertz.  All corrections to the calculation and error
handling are the fault of Brian Peterson.</p>
    
    <h2 class="hasAnchor" id="background"><a class="anchor" href="#background"></a>Background</h2>

    <p>This function provides several estimation methods for
the Value at Risk (typically written as VaR) of a return series and the
Component VaR of a portfolio. Take care to capitalize VaR in the commonly
accepted manner, to avoid confusion with var (variance) and VAR (vector
auto-regression).  VaR is an industry standard for measuring downside risk.
For a return series, VaR is defined as the high quantile (e.g. ~a 95<!-- % or 99% -->
quantile) of the negative value of the returns. This quantile needs to be
estimated.  With a sufficiently large data set, you may choose to utilize
the empirical quantile calculated using <code>quantile</code>.  More
efficient estimates of VaR are obtained if a (correct) assumption is made on
the return distribution, such as the normal distribution.  If your return
series is skewed and/or has excess kurtosis, Cornish-Fisher estimates of VaR
can be more appropriate.  For the VaR of a portfolio, it is also of interest
to decompose total portfolio VaR into the risk contributions of each of the
portfolio components.  For the above mentioned VaR estimators, such a
decomposition is possible in a financially meaningful way.</p>
    
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Boudt, Kris, Peterson, Brian, and Christophe Croux. 2008.
Estimation and decomposition of downside risk for portfolios with non-normal
returns. 2008. The Journal of Risk, vol. 11, 79-103.</p>
<p>Cont, Rama, Deguest, Romain and Giacomo Scandolo. Robustness and sensitivity
analysis of risk measurement procedures. Financial Engineering Report No.
2007-06, Columbia University Center for Financial Engineering.</p>
<p>Denton M. and Jayaraman, J.D. Incremental, Marginal, and Component VaR.
Sunguard. 2004.</p>
<p>Epperlein, E., Smillie, A. Cracking VaR with kernels. RISK, 2006, vol.  19,
70-74.</p>
<p>Gourieroux, Christian, Laurent, Jean-Paul and Olivier Scaillet.  Sensitivity
analysis of value at risk. Journal of Empirical Finance, 2000, Vol. 7,
225-245.</p>
<p>Keel, Simon and Ardia, David. Generalized marginal risk. Aeris CAPITAL
discussion paper.</p>
<p>Laurent Favre and Jose-Antonio Galeano. Mean-Modified Value-at-Risk
Optimization with Hedge Funds. Journal of Alternative Investment, Fall 2002,
v 5.</p>
<p>Martellini, L. and Ziemann, V., 2010. Improved estimates of higher-order 
comoments and implications for portfolio selection. Review of Financial 
Studies, 23(4):1467-1502.</p>
<p>Return to RiskMetrics: Evolution of a Standard
<a href='https://www.msci.com/documents/10199/dbb975aa-5dc2-4441-aa2d-ae34ab5f0945'>https://www.msci.com/documents/10199/dbb975aa-5dc2-4441-aa2d-ae34ab5f0945</a></p>
<p>Zangari, Peter. A VaR Methodology for Portfolios that include Options. 1996.
RiskMetrics Monitor, First Quarter, 4-12.</p>
<p>Rockafellar, Terry and Uryasev, Stanislav. Optimization of Conditional VaR.
The Journal of Risk, 2000, vol. 2, 21-41.</p>
<p>Dowd, Kevin. Measuring Market Risk, John Wiley and Sons, 2010.</p>
<p>Jorian, Phillippe. Value at Risk, the new benchmark for managing financial risk.
3rd Edition, McGraw Hill, 2006.</p>
<p>Hallerback, John. "Decomposing Portfolio Value-at-Risk: A General Analysis",
2003. The Journal of Risk vol 5/2.</p>
<p>Yamai and Yoshiba (2002). "Comparative Analyses of Expected Shortfall and 
   Value-at-Risk: Their Estimation Error, Decomposition, and Optimization",
   Bank of Japan.</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <p><code>SharpeRatio.modified</code> 
<code><a href='chart.VaRSensitivity.html'>chart.VaRSensitivity</a></code> 
<code><a href='Return.clean.html'>Return.clean</a></code></p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
    <span class='fu'>data</span>(<span class='no'>edhec</span>)

    <span class='co'># first do normal VaR calc</span>
    <span class='fu'>VaR</span>(<span class='no'>edhec</span>, <span class='kw'>p</span><span class='kw'>=</span><span class='fl'>.95</span>, <span class='kw'>method</span><span class='kw'>=</span><span class='st'>"historical"</span>)</div><div class='output co'>#&gt;     Convertible Arbitrage CTA Global Distressed Securities Emerging Markets
#&gt; VaR              -0.01916    -0.0354             -0.018875        -0.044605
#&gt;     Equity Market Neutral Event Driven Fixed Income Arbitrage Global Macro
#&gt; VaR             -0.006385     -0.02254               -0.00929     -0.01624
#&gt;     Long/Short Equity Merger Arbitrage Relative Value Short Selling
#&gt; VaR          -0.02544        -0.013455      -0.013175      -0.07848
#&gt;     Funds of Funds
#&gt; VaR      -0.021265</div><div class='input'>
    <span class='co'># now use Gaussian</span>
    <span class='fu'>VaR</span>(<span class='no'>edhec</span>, <span class='kw'>p</span><span class='kw'>=</span><span class='fl'>.95</span>, <span class='kw'>method</span><span class='kw'>=</span><span class='st'>"gaussian"</span>)</div><div class='output co'>#&gt;     Convertible Arbitrage  CTA Global Distressed Securities Emerging Markets
#&gt; VaR           -0.02645782 -0.03471098            -0.0221269      -0.05498927
#&gt;     Equity Market Neutral Event Driven Fixed Income Arbitrage Global Macro
#&gt; VaR          -0.008761813  -0.02246202            -0.01900198  -0.02023018
#&gt;     Long/Short Equity Merger Arbitrage Relative Value Short Selling
#&gt; VaR       -0.02859264      -0.01152478    -0.01493049   -0.08617027
#&gt;     Funds of Funds
#&gt; VaR    -0.02393888</div><div class='input'>
    <span class='co'># now use modified Cornish Fisher calc to take non-normal distribution into account</span>
    <span class='fu'>VaR</span>(<span class='no'>edhec</span>, <span class='kw'>p</span><span class='kw'>=</span><span class='fl'>.95</span>, <span class='kw'>method</span><span class='kw'>=</span><span class='st'>"modified"</span>)</div><div class='output co'>#&gt;     Convertible Arbitrage  CTA Global Distressed Securities Emerging Markets
#&gt; VaR           -0.03247395 -0.03380228            -0.0274924      -0.06363081
#&gt;     Equity Market Neutral Event Driven Fixed Income Arbitrage Global Macro
#&gt; VaR           -0.01134637  -0.02812515             -0.0246791  -0.01548247
#&gt;     Long/Short Equity Merger Arbitrage Relative Value Short Selling
#&gt; VaR       -0.03037494      -0.01486869    -0.01926435   -0.07431463
#&gt;     Funds of Funds
#&gt; VaR    -0.02502852</div><div class='input'>
    <span class='co'># now use p=.99</span>
    <span class='fu'>VaR</span>(<span class='no'>edhec</span>, <span class='kw'>p</span><span class='kw'>=</span><span class='fl'>.99</span>)</div><div class='output co'>#&gt;     Convertible Arbitrage  CTA Global Distressed Securities Emerging Markets
#&gt; VaR            -0.1009223 -0.04847019           -0.06533764       -0.1397195
#&gt;     Equity Market Neutral Event Driven Fixed Income Arbitrage Global Macro
#&gt; VaR           -0.04404136  -0.06385154            -0.05850228  -0.02437999
#&gt;     Long/Short Equity Merger Arbitrage Relative Value Short Selling
#&gt; VaR       -0.05508705      -0.03630211      -0.050531     -0.122236
#&gt;     Funds of Funds
#&gt; VaR    -0.05500037</div><div class='input'>    <span class='co'># or the equivalent alpha=.01</span>
    <span class='fu'>VaR</span>(<span class='no'>edhec</span>, <span class='kw'>p</span><span class='kw'>=</span><span class='fl'>.01</span>)</div><div class='output co'>#&gt;     Convertible Arbitrage  CTA Global Distressed Securities Emerging Markets
#&gt; VaR            -0.1009223 -0.04847019           -0.06533764       -0.1397195
#&gt;     Equity Market Neutral Event Driven Fixed Income Arbitrage Global Macro
#&gt; VaR           -0.04404136  -0.06385154            -0.05850228  -0.02437999
#&gt;     Long/Short Equity Merger Arbitrage Relative Value Short Selling
#&gt; VaR       -0.05508705      -0.03630211      -0.050531     -0.122236
#&gt;     Funds of Funds
#&gt; VaR    -0.05500037</div><div class='input'>
    <span class='co'># now with outliers squished</span>
    <span class='fu'>VaR</span>(<span class='no'>edhec</span>, <span class='kw'>clean</span><span class='kw'>=</span><span class='st'>"boudt"</span>)</div><div class='output co'>#&gt; <span class='error'>Error: requireNamespace("robustbase", quietly = TRUE) is not TRUE</span></div><div class='input'>
    <span class='co'># add Component VaR for the equal weighted portfolio</span>
    <span class='fu'>VaR</span>(<span class='no'>edhec</span>, <span class='kw'>clean</span><span class='kw'>=</span><span class='st'>"boudt"</span>, <span class='kw'>portfolio_method</span><span class='kw'>=</span><span class='st'>"component"</span>)</div><div class='output co'>#&gt; <span class='message'>no weights passed in, assuming equal weighted portfolio</span></div><div class='output co'>#&gt; <span class='error'>Error: requireNamespace("robustbase", quietly = TRUE) is not TRUE</span></div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#note">Note</a></li>

      <li><a href="#background">Background</a></li>

      <li><a href="#references">References</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

    <h2>Author</h2>
    
Brian G. Peterson and Kris Boudt

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Brian G. Peterson, Peter Carl.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>
