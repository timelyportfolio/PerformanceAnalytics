<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>downside risk (deviation, variance) of the return distribution — DownsideDeviation â€¢ PerformanceAnalytics</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>
  
  
<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">PerformanceAnalytics</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/pa-charts.html">PerformanceAnalytics Charts and Tables Overview</a>
    </li>
  </ul>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/braverock/PerformanceAnalytics">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>downside risk (deviation, variance) of the return distribution</h1>
    </div>

    
    <p>Downside deviation, semideviation, and semivariance are measures of downside
risk.</p>
    

    <pre class="usage"><span class='fu'>DownsideDeviation</span>(<span class='no'>R</span>, <span class='kw'>MAR</span> <span class='kw'>=</span> <span class='fl'>0</span>, <span class='kw'>method</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"full"</span>, <span class='st'>"subset"</span>), <span class='no'>...</span>,
  <span class='kw'>potential</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)

<span class='fu'>DownsidePotential</span>(<span class='no'>R</span>, <span class='kw'>MAR</span> <span class='kw'>=</span> <span class='fl'>0</span>)

<span class='fu'>SemiDeviation</span>(<span class='no'>R</span>)

<span class='fu'>SemiVariance</span>(<span class='no'>R</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>R</th>
      <td><p>an xts, vector, matrix, data frame, timeSeries or zoo object of
asset returns</p></td>
    </tr>
    <tr>
      <th>MAR</th>
      <td><p>Minimum Acceptable Return, in the same periodicity as your
returns</p></td>
    </tr>
    <tr>
      <th>method</th>
      <td><p>one of "full" or "subset", indicating whether to use the
length of the full series or the length of the subset of the series below
the MAR as the denominator, defaults to "full"</p></td>
    </tr>
    <tr>
      <th>&#8230;</th>
      <td><p>any other passthru parameters</p></td>
    </tr>
    <tr>
      <th>potential</th>
      <td><p>if TRUE, calculate downside potential instead, default
FALSE</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Downside deviation, similar to semi deviation, eliminates positive returns
when calculating risk.  Instead of using the mean return or zero, it uses
the Minimum Acceptable Return as proposed by Sharpe (which may be the mean
historical return or zero). It measures the variability of underperformance
below a minimum targer rate. The downside variance is the square of the downside
potential.</p>
<p>To calculate it, we take the subset of returns that are less than the target
(or Minimum Acceptable Returns (MAR)) returns and take the differences of
those to the target.  We sum the squares and divide by the total number of
returns to get a below-target semi-variance.
    $$DownsideDeviation(R , MAR) = \delta_{MAR} = \sqrt{\sum^{n}_{t=1}\frac{min[(R_{t} - MAR), 0]^2}{n}}$$
    $$ DownsideVariance(R, MAR) = \sum^{n}_{t=1}\frac{min[(R_{t} - MAR), 0]^2}{n}$$
    $$DownsidePotential(R, MAR) = \sum^{n}_{t=1}\frac{min[(R_{t} - MAR), 0]} {n}$$</p>
<p>where \(n\) is either the number of observations of the entire series or
the number of observations in the subset of the series falling below the
MAR.</p>
<p>SemiDeviation or SemiVariance is a popular alternative downside risk measure
that may be used in place of standard deviation or variance. SemiDeviation
and SemiVariance are implemented as a wrapper of DownsideDeviation with
MAR=mean(R).</p>
<p>In many functions like Markowitz optimization, semideviation may be
substituted directly, and the covariance matrix may be constructed from
semideviation or the vector of returns below the mean rather than from
variance or the full vector of returns.</p>
<p>In semideviation, by convention, the value of \(n\) is set to the full
number of observations. In semivariance the the value of \(n\) is set to
the subset of returns below the mean.  It should be noted that while this is
the correct mathematical definition of semivariance, this result doesn't
make any sense if you are also going to be using the time series of returns
below the mean or below a MAR to construct a semi-covariance matrix for
portfolio optimization.</p>
<p>Sortino recommends calculating downside deviation utilizing a continuous
fitted distribution rather than the discrete distribution of observations.
This would have significant utility, especially in cases of a small number
of observations. He recommends using a lognormal distribution, or a fitted
distribution based on a relevant style index, to construct the returns below
the MAR to increase the confidence in the final result.  Hopefully, in the
future, we'll add a fitted option to this function, and would be happy to
accept a contribution of this nature.</p>
    
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Sortino, F. and Price, L. Performance Measurement in a Downside
Risk Framework. <em>Journal of Investing</em>. Fall 1994, 59-65.  
Carl Bacon, <em>Practical portfolio performance measurement and attribution</em>, 
second edition 2008</p>
<p>Plantinga, A., van der Meer, R. and Sortino, F. The Impact of Downside Risk
on Risk-Adjusted Performance of Mutual Funds in the Euronext Markets. July
19, 2001. Available at SSRN: <a href='http://ssrn.com/abstract=277352'>http://ssrn.com/abstract=277352</a>
    <a href='http://www.sortino.com/htm/performance.htm'>http://www.sortino.com/htm/performance.htm</a> see especially end note 10
    <a href='http://en.wikipedia.org/wiki/Semivariance'>http://en.wikipedia.org/wiki/Semivariance</a></p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='co'>#with data used in Bacon 2008</span>

<span class='fu'>data</span>(<span class='no'>portfolio_bacon</span>)
<span class='no'>MAR</span> <span class='kw'>=</span> <span class='fl'>0.005</span>
<span class='fu'>DownsideDeviation</span>(<span class='no'>portfolio_bacon</span>[,<span class='fl'>1</span>], <span class='no'>MAR</span>) <span class='co'>#expected 0.0255</span></div><div class='output co'>#&gt; [1] 0.02553674</div><div class='input'><span class='fu'>DownsidePotential</span>(<span class='no'>portfolio_bacon</span>[,<span class='fl'>1</span>], <span class='no'>MAR</span>) <span class='co'>#expected 0.0137</span></div><div class='output co'>#&gt; [1] 0.01370833</div><div class='input'>
<span class='co'>#with data of managers</span>

<span class='fu'>data</span>(<span class='no'>managers</span>)
<span class='fu'>apply</span>(<span class='no'>managers</span>[,<span class='fl'>1</span>:<span class='fl'>6</span>], <span class='fl'>2</span>, <span class='no'>sd</span>, <span class='kw'>na.rm</span><span class='kw'>=</span><span class='fl'>TRUE</span>)</div><div class='output co'>#&gt;       HAM1       HAM2       HAM3       HAM4       HAM5       HAM6 
#&gt; 0.02562881 0.03671623 0.03651259 0.05319796 0.04573149 0.02381247 </div><div class='input'><span class='fu'>DownsideDeviation</span>(<span class='no'>managers</span>[,<span class='fl'>1</span>:<span class='fl'>6</span>])  <span class='co'># MAR 0%</span></div><div class='output co'>#&gt;                                     HAM1      HAM2       HAM3       HAM4
#&gt; Downside Deviation (MAR = 0%) 0.01454078 0.0115736 0.01735454 0.03406781
#&gt;                                    HAM5       HAM6
#&gt; Downside Deviation (MAR = 0%) 0.0304305 0.01214476</div><div class='input'><span class='fu'>DownsideDeviation</span>(<span class='no'>managers</span>[,<span class='fl'>1</span>:<span class='fl'>6</span>], <span class='kw'>MAR</span> <span class='kw'>=</span> <span class='fl'>.04</span>/<span class='fl'>12</span>) <span class='co'>#MAR 4%</span></div><div class='output co'>#&gt;                                    HAM1       HAM2       HAM3       HAM4
#&gt; Downside Deviation (MAR = 0%) 0.0157602 0.01341739 0.01891525 0.03565192
#&gt;                                    HAM5       HAM6
#&gt; Downside Deviation (MAR = 0%) 0.0320608 0.01366533</div><div class='input'><span class='fu'>SemiDeviation</span>(<span class='no'>managers</span>[,<span class='fl'>1</span>,<span class='kw'>drop</span><span class='kw'>=</span><span class='fl'>FALSE</span>])</div><div class='output co'>#&gt;                     HAM1
#&gt; Semi-Deviation 0.0190795</div><div class='input'><span class='fu'>SemiDeviation</span>(<span class='no'>managers</span>[,<span class='fl'>1</span>:<span class='fl'>6</span>])</div><div class='output co'>#&gt;                     HAM1       HAM2       HAM3       HAM4       HAM5       HAM6
#&gt; Semi-Deviation 0.0190795 0.02011968 0.02369306 0.03950215 0.03244118 0.01751678</div><div class='input'><span class='fu'>SemiVariance</span> (<span class='no'>managers</span>[,<span class='fl'>1</span>,<span class='kw'>drop</span><span class='kw'>=</span><span class='fl'>FALSE</span>])</div><div class='output co'>#&gt;                     HAM1
#&gt; Semi-Variance 0.02698249</div><div class='input'><span class='fu'>SemiVariance</span> (<span class='no'>managers</span>[,<span class='fl'>1</span>:<span class='fl'>6</span>]) <span class='co'>#calculated using method="subset"</span></div><div class='output co'>#&gt;                     HAM1       HAM2       HAM3       HAM4       HAM5       HAM6
#&gt; Semi-Variance 0.02698249 0.02580294 0.03186006 0.05763839 0.04558371 0.02602228</div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#details">Details</a></li>

      <li><a href="#references">References</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

    <h2>Author</h2>
    
Peter Carl, Brian G. Peterson, Matthieu Lestel

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Brian G. Peterson, Peter Carl.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>
