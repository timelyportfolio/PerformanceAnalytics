<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Functions for calculating EWMA comoments of financial time series — EWMAMoments â€¢ PerformanceAnalytics</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>
  
  
<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">PerformanceAnalytics</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/pa-charts.html">PerformanceAnalytics Charts and Tables Overview</a>
    </li>
  </ul>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/braverock/PerformanceAnalytics">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Functions for calculating EWMA comoments of financial time series</h1>
    </div>

    
    <p>calculates exponentially weighted moving average covariance, coskewness and cokurtosis matrices</p>
    

    <pre class="usage"><span class='fu'>M2.ewma</span>(<span class='no'>R</span>, <span class='kw'>lambda</span> <span class='kw'>=</span> <span class='fl'>0.97</span>, <span class='kw'>last.M2</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='no'>...</span>)

<span class='fu'>M3.ewma</span>(<span class='no'>R</span>, <span class='kw'>lambda</span> <span class='kw'>=</span> <span class='fl'>0.97</span>, <span class='kw'>last.M3</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>as.mat</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='no'>...</span>)

<span class='fu'>M4.ewma</span>(<span class='no'>R</span>, <span class='kw'>lambda</span> <span class='kw'>=</span> <span class='fl'>0.97</span>, <span class='kw'>last.M4</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>as.mat</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='no'>...</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>R</th>
      <td><p>an xts, vector, matrix, data frame, timeSeries or zoo object of
asset returns (with mean zero)</p></td>
    </tr>
    <tr>
      <th>lambda</th>
      <td><p>decay coefficient</p></td>
    </tr>
    <tr>
      <th>last.M2</th>
      <td><p>last estimated covariance matrix before the observed returns R</p></td>
    </tr>
    <tr>
      <th>&#8230;</th>
      <td><p>any other passthru parameters</p></td>
    </tr>
    <tr>
      <th>last.M3</th>
      <td><p>last estimated coskewness matrix before the observed returns R</p></td>
    </tr>
    <tr>
      <th>as.mat</th>
      <td><p>TRUE/FALSE whether to return the full moment matrix or only
the vector with the unique elements (the latter is advised for speed), default
TRUE</p></td>
    </tr>
    <tr>
      <th>last.M4</th>
      <td><p>last estimated cokurtosis matrix before the observed returns R</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The coskewness and cokurtosis matrices are defined as the matrices of dimension 
p x p^2 and p x p^3 containing the third and fourth order central moments. They
are useful for measuring nonlinear dependence between different assets of the 
portfolio and computing modified VaR and modified ES of a portfolio.</p>
<p>EWMA estimation of the covariance matrix was popularized by the RiskMetrics report in 1996.
The M3.ewma and M4.ewma are straightforward extensions to the setting of third and fourth
order central moments</p>
    
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>JP Morgan. Riskmetrics technical document. 1996.</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <p><code>CoMoments</code>  <code><a href='ShrinkageMoments.html'>ShrinkageMoments</a></code>  <code><a href='StructuredMoments.html'>StructuredMoments</a></code>  <code><a href='MCA.html'>MCA</a></code></p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='fu'>data</span>(<span class='no'>edhec</span>)

<span class='co'># EWMA estimation</span>
<span class='co'># 'as.mat = F' would speed up calculations in higher dimensions</span>
<span class='no'>sigma</span> <span class='kw'>&lt;-</span> <span class='fu'>M2.ewma</span>(<span class='no'>edhec</span>, <span class='fl'>0.94</span>)
<span class='no'>m3</span> <span class='kw'>&lt;-</span> <span class='fu'>M3.ewma</span>(<span class='no'>edhec</span>, <span class='fl'>0.94</span>)
<span class='no'>m4</span> <span class='kw'>&lt;-</span> <span class='fu'>M4.ewma</span>(<span class='no'>edhec</span>, <span class='fl'>0.94</span>)

<span class='co'># compute equal-weighted portfolio modified ES </span>
<span class='no'>mu</span> <span class='kw'>&lt;-</span> <span class='fu'>colMeans</span>(<span class='no'>edhec</span>)
<span class='no'>p</span> <span class='kw'>&lt;-</span> <span class='fu'>length</span>(<span class='no'>mu</span>)
<span class='fu'><a href='ES.html'>ES</a></span>(<span class='kw'>p</span> <span class='kw'>=</span> <span class='fl'>0.95</span>, <span class='kw'>portfolio_method</span> <span class='kw'>=</span> <span class='st'>"component"</span>, <span class='kw'>weights</span> <span class='kw'>=</span> <span class='fu'>rep</span>(<span class='fl'>1</span> / <span class='no'>p</span>, <span class='no'>p</span>), <span class='kw'>mu</span> <span class='kw'>=</span> <span class='no'>mu</span>,
    <span class='kw'>sigma</span> <span class='kw'>=</span> <span class='no'>sigma</span>, <span class='kw'>m3</span> <span class='kw'>=</span> <span class='no'>m3</span>, <span class='kw'>m4</span> <span class='kw'>=</span> <span class='no'>m4</span>)</div><div class='output co'>#&gt; $MES
#&gt; [1] 0.03593744
#&gt; 
#&gt; $contribution
#&gt;  [1]  0.0079979527 -0.0023398485  0.0040806253  0.0079165121  0.0007909966
#&gt;  [6]  0.0039465684  0.0048861335  0.0008662255  0.0041314124  0.0012537442
#&gt; [11]  0.0039907892 -0.0058159612  0.0042322857
#&gt; 
#&gt; $pct_contrib_MES
#&gt;  [1]  0.22255212 -0.06510894  0.11354804  0.22028595  0.02201038  0.10981775
#&gt;  [7]  0.13596222  0.02410371  0.11496124  0.03488686  0.11104825 -0.16183573
#&gt; [13]  0.11776816
#&gt; </div><div class='input'>
<span class='co'># compare to sample method</span>
<span class='no'>sigma</span> <span class='kw'>&lt;-</span> <span class='fu'>cov</span>(<span class='no'>edhec</span>)
<span class='no'>m3</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='CoMoments.html'>M3.MM</a></span>(<span class='no'>edhec</span>)
<span class='no'>m4</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='CoMoments.html'>M4.MM</a></span>(<span class='no'>edhec</span>)
<span class='fu'><a href='ES.html'>ES</a></span>(<span class='kw'>p</span> <span class='kw'>=</span> <span class='fl'>0.95</span>, <span class='kw'>portfolio_method</span> <span class='kw'>=</span> <span class='st'>"component"</span>, <span class='kw'>weights</span> <span class='kw'>=</span> <span class='fu'>rep</span>(<span class='fl'>1</span> / <span class='no'>p</span>, <span class='no'>p</span>), <span class='kw'>mu</span> <span class='kw'>=</span> <span class='no'>mu</span>,
    <span class='kw'>sigma</span> <span class='kw'>=</span> <span class='no'>sigma</span>, <span class='kw'>m3</span> <span class='kw'>=</span> <span class='no'>m3</span>, <span class='kw'>m4</span> <span class='kw'>=</span> <span class='no'>m4</span>)</div><div class='output co'>#&gt; $MES
#&gt; [1] 0.03241585
#&gt; 
#&gt; $contribution
#&gt;  [1]  0.0074750513 -0.0028125166  0.0039422674  0.0069376579  0.0008077760
#&gt;  [6]  0.0037114666  0.0043125937  0.0007173036  0.0036152960  0.0013693293
#&gt; [11]  0.0037650911 -0.0048178690  0.0033924063
#&gt; 
#&gt; $pct_contrib_MES
#&gt;  [1]  0.23059863 -0.08676361  0.12161541  0.21402052  0.02491917  0.11449542
#&gt;  [7]  0.13303965  0.02212817  0.11152864  0.04224258  0.11614968 -0.14862694
#&gt; [13]  0.10465269
#&gt; </div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#details">Details</a></li>

      <li><a href="#references">References</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

    <h2>Author</h2>
    
Dries Cornilly

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Brian G. Peterson, Peter Carl.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>
